<!DOCTYPE html>
<html style="height: 100vh">
<head>
<title>TurtleDuck</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
	integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
	integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
	crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
	crossorigin="anonymous"></script>
<link rel="stylesheet"
	href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
	integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
	crossorigin="anonymous">

<script type="text/javascript" charset="utf-8" src="app.js"></script>
<script type="text/javascript" charset="utf-8" src="teavm/classes.js"></script>
<script type="text/javascript" charset="utf-8"
	src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
<script type="text/javascript" charset="utf-8"
	src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-java.min.js"></script>
<link rel="stylesheet" href="xterm/css/xterm.css" />
<link rel="stylesheet" href="style.css" />
</head>
<body onload="main()">

	<div id="page">
		<header>
			<nav id="top-left">
				<a id="home" href="#">TurtleDuck ðŸ¦†</a>
				<ul id="toolbar">
					<li><button id="tb-new" type="button">New</button></li>
					<li><button id="tb-save" type="button">Save</button></li>
				</ul>
			</nav>
			<nav id="top-mid"></nav>
			<nav id="top-right"></nav>
		</header>

		<aside id="explorer" class="widget">
			<h1>Imports</h1>
			<ul id="explorer-imports" data-role="listview">
				<li class="package">java.util</li>
				<li class="java">TShell</li>
			</ul>
			<h1>Types</h1>
			<ul id="explorer-types"></ul>
			<h1>Methods</h1>
			<ul id="explorer-methods"></ul>
			<h1>Variables</h1>
			<ul id="explorer-variables"></ul>
		</aside>

		<main id="editor" class="widget" data-widget="editor" data-provides="editor">
			<ul id="editor-tabs" class="nav nav-tabs"></ul>
			<div id="editor-wrap">
				<div id="editor-embed"></div>
			</div>
		</main>

		<!--div id="right-size" style="position:absolute;left:0px;margin-left:-5px;height:100%;width:5px;background:#ccc;z-index:100" ></div-->
		<figure id="figure0">
			<svg id="svg0" style="display: none;" viewBox="0 0 1280 720"
				preserveAspectRatio="xMinYMin slice"></svg>
		</figure>
		<article id="instructions" class="widget" data-widget="instructions" data-provides="instructions" style="display: none">
			<h2>Method Bytecode</h2>
			<div id="bytecode-display"></div>
		</article>

		<!-- div style="width: 100%; height: 10px; background: #f00"
			draggable="true"></div-->
		<section id="console">
			<!--div id="code-size" style="position:relative;top:0px;margin-top:-5px;width:100%;height:5px;background:#ccc;z-index:100"></div-->
			<div id="xtermjs-wrap" class="widget" data-widget="xtermjs" data-requires="jshell">
			</div>
		</section>

		<footer id="bottom">footer</footer>
	</div>
	<script>
function resizable(element,handle,direction,callback) {
	var start, size = 0;
	handle.onmousedown = mouseDown;
	function mouseDown(e) {
		e = e || window.event;
		console.log("resize start: ")
		console.log(e);
		e.preventDefault();
		if(direction == 'h') {
			start = e.clientX;
			size = element.clientWidth;
		} else {
			start = e.clientY;
			size = element.clientHeight;			
		}
		document.onmouseup = mouseUp;
		document.onmousemove = mouseMove;
	}
	
	function mouseMove(e) {
		e = e || window.event;
		console.log("resize move: ");
		console.log(e);
		e.preventDefault();
		if(e.buttons != 1) {
			mouseUp(e);
		}
		if(direction == 'h') {
			size = size + (start - e.clientX);
			start = e.clientX;
			element.style.width = size + "px";
		} else {
			size = size + (start - e.clientY);
			start = e.clientY;
			element.style.height = size + "px";
		}
		console.log("resize to: " + size);
	}
	
	function mouseUp(e) {
		console.log("resize done: ")
		console.log(e);
		e.preventDefault();
		document.onmouseup = null;
		document.onmousemove = null;
		console.log(callback);
		if(callback) {
			callback();
		}
	}
}
resizable(document.getElementById("code-box"), document.getElementById("code-size"), "v", () => window.fitAddon.fit());
resizable(document.getElementById("right"), document.getElementById("right-size"), "h");

</script>
</body>
</html>